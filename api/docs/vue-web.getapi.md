<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@elux/vue-web](./vue-web.md) &gt; [getApi](./vue-web.getapi.md)

## getApi() function

获取应用全局方法

<b>Signature:</b>

```typescript
export declare function getApi<TAPI extends {
    State: any;
    GetActions: any;
    LoadComponent: any;
    Modules: any;
}, R extends URouter>(demoteForProductionOnly?: boolean, injectActions?: Record<string, string[]>): Pick<TAPI, 'GetActions' | 'LoadComponent' | 'Modules'> & {
    GetRouter: () => R;
    useRouter: () => R;
    useStore: () => UStore<TAPI['State'], R['routeState']['params']>;
};
```

## Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  demoteForProductionOnly | boolean | 用于不支持Proxy的运行环境，参见：<code>兼容IE浏览器</code> |
|  injectActions | Record&lt;string, string\[\]&gt; | 用于不支持Proxy的运行环境，参见：<code>兼容IE浏览器</code> |

<b>Returns:</b>

Pick&lt;TAPI, 'GetActions' \| 'LoadComponent' \| 'Modules'&gt; &amp; { GetRouter: () =&gt; R; useRouter: () =&gt; R; useStore: () =&gt; [UStore](./vue-web.ustore.md)<!-- -->&lt;TAPI\['State'\], R\['routeState'\]\['params'\]&gt;; }

返回包含多个全局方法的结构体：

- `LoadComponent`<!-- -->：用于加载其它模块导出的[EluxUI组件](./vue-web.exportview.md)<!-- -->，参见 [LoadComponent](./vue-web.loadcomponent.md)<!-- -->。 相比直接 `import`<!-- -->，使用此方法加载组件不仅可以`按需加载`<!-- -->，而且还可以自动初始化其所属 Model，例如：

```js
  const Article = LoadComponent('article', 'main')
```
- `Modules`<!-- -->：用于获取所有模块的对外接口，参见 [FacadeModules](./vue-web.facademodules.md)<!-- -->，例如：

```js
  dispatch(Modules.article.actions.refresh())
```
- `GetActions`<!-- -->：当需要 dispatch 多个 module 的 action 时，例如：

```js
  dispatch(Modules.a.actions.a1())
  dispatch(Modules.b.actions.b1())
```
这种写法可以简化为：

```js
  const {a, b} = GetActions('a', 'b')
  dispatch(a.a1())
  dispatch(b.b1())
```
- `GetRouter`<!-- -->：用于获取全局Roter，注意此方法不能运行在SSR（`服务端渲染`<!-- -->）中，因为服务端每个 `request` 都将生成一个 Router，不存在全局 Roter，请使用 `useRouter()`

- `useRouter`<!-- -->：React Hook，用于获取当前 Router，在CSR（`客户端渲染`<!-- -->）中，因为只存在一个Router，所以其值等于`GetRouter()`<!-- -->，例如：

```js
  const blobalRouter = GetRouter()
  const currentRouter = useRouter()
  console.log(blobalRouter===currentRouter)
```
- `useStore`<!-- -->：React Hook，用于获取当前 Store，例如：

```js
  const store = useStore()
  store.dispatch(Modules.article.actions.refresh())
```

## Remarks

参数 `components` 支持异步获取组件，当组件代码量大时，可以使用 `import(...)` 返回Promise

## Example


```js
const {Modules, LoadComponent, GetActions, GetRouter, useStore, useRouter} = getApi<API, Router>();
```

